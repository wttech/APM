<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:granite="http://www.adobe.com/jcr/granite/1.0"
  xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
  xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
  jcr:primaryType="cq:Page">
  <jcr:content
    jcr:mixinTypes="[sling:VanityPath]"
    jcr:primaryType="nt:unstructured"
    jcr:title="APM Scripts"
    sling:resourceType="granite/ui/components/shell/collectionpage"
    sling:vanityOrder="{Long}301"
    sling:vanityPath="/apm/scripts"
    consoleId="cq-bridge-data-collections"
    currentView="${state[&quot;products.shell.collectionpage.layoutId&quot;].string}"
    modeGroup="cq-experience-fragments-admin-childpages"
    omnisearchLocationPath="/libs/granite/omnisearch/content/metadata/experiencefragments"
    pageURITemplate="/apm/scripts.html{+id}"
    targetCollection=".cq-experience-fragments-admin-childpages">
    <redirector
      jcr:primaryType="nt:unstructured"
      sling:resourceType="granite/ui/components/coral/foundation/admin/contentchecker"
      path="${requestPathInfo.suffix}"
      redirectWhenEmpty="/apm/scripts.html/conf/apm/scripts"/>
    <head jcr:primaryType="nt:unstructured">
      <clientlibs
        jcr:primaryType="nt:unstructured"
        sling:resourceType="granite/ui/components/coral/foundation/includeclientlibs"
        categories="[apm.graphview,apm.scripts,cq.common.wcm,cq.sites.collectionpage,cq.siteadmin.admin.page.row,cq.experiencefragments.components.experiencefragment,cq.siteadmin.common]"/>
    </head>
    <views jcr:primaryType="nt:unstructured">
      <content
        jcr:primaryType="nt:unstructured"
        granite:id="view-root"
        sling:resourceType="granite/ui/components/coral/foundation/container">
        <items jcr:primaryType="nt:unstructured">
          <list
            granite:rel="cq-experience-fragments-admin-childpages"
            granite:id="list-view-root"
            jcr:primaryType="nt:unstructured"
            jcr:title="List View"
            sling:resourceType="granite/ui/components/coral/foundation/table"
            icon="viewList"
            layoutId="list"
            modeGroup="cq-experience-fragments-admin-childpages"
            path="${requestPathInfo.suffix}"
            rootPath="/conf/apm/scripts"
            selectionMode="row"
            size="1000"
            src="/mnt/overlay/apm/views/scripts/jcr:content/views/content/items/list.html{+id}"
            stateId="xf.shell.collectionpage">
            <columns jcr:primaryType="nt:unstructured">
              <select
                jcr:primaryType="nt:unstructured"
                select="{Boolean}true"/>
              <title
                jcr:primaryType="nt:unstructured"
                jcr:title="Script"
                sortable="{Boolean}true"/>
              <updated
                jcr:primaryType="nt:unstructured"
                jcr:title="Updated"
                sortable="{Boolean}true"
                sortType="date"/>
              <author
                jcr:primaryType="nt:unstructured"
                jcr:title="Author"
                sortable="{Boolean}true"/>
              <launchMode
                jcr:primaryType="nt:unstructured"
                jcr:title="Launch"
                sortable="{Boolean}true"/>
              <valid
                jcr:primaryType="nt:unstructured"
                jcr:title="Valid"
                sortable="{Boolean}true"/>
              <lastrun
                jcr:primaryType="nt:unstructured"
                jcr:title="Last Run"
                sortable="{Boolean}true"
                sortType="date"/>
              <lastrunonpublish
                jcr:primaryType="nt:unstructured"
                jcr:title="Last Run on Publish"
                sortable="{Boolean}true"
                sortType="date"/>
              <lastdryrun
                jcr:primaryType="nt:unstructured"
                jcr:title="Last Dry Run"
                sortable="{Boolean}true"
                sortType="date"/>
            </columns>
            <datasource
              jcr:primaryType="nt:unstructured"
              sling:resourceType="apm/datasource/scripts"
              itemResourceType="apm/components/scriptsRow"/>
          </list>
          <tree
                  jcr:primaryType="nt:unstructured"
                  granite:id="graph-view-root"
                  sling:resourceType="granite/ui/components/coral/foundation/container"/>
        </items>
      </content>
    </views>
    <breadcrumbs
      jcr:primaryType="nt:unstructured"
      sling:resourceType="wcm/commons/ui/shell/datasources/breadcrumbs"
      path="${requestPathInfo.suffix}"
      rootPath="/conf/apm/scripts"
      rootTitle="APM Scripts"/>
    <actions jcr:primaryType="nt:unstructured">
      <primary jcr:primaryType="nt:unstructured">
        <back jcr:primaryType="nt:unstructured"
          sling:resourceType="granite/ui/components/coral/foundation/anchorbutton"
          href="/apm.html"
          icon="home"
          text="Dashboard"
          variant="quiet"/>
      </primary>
      <secondary jcr:primaryType="nt:unstructured">
        <create
          granite:id="xf-create-pulldown"
          jcr:primaryType="nt:unstructured"
          sling:resourceType="granite/ui/components/coral/foundation/pulldown"
          text="Create"
          variant="primary">
          <items jcr:primaryType="nt:unstructured">
            <createscript
              granite:rel="cq-experiencefragments-admin-create-xf"
              jcr:primaryType="nt:unstructured"
              sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
              action="foundation.link"
              href="/apm/editor.html"
              icon="fileAdd"
              relScope="collection"
              target=".cq-experience-fragments-admin-childpages"
              text="Create Script">
              <data
                jcr:primaryType="nt:unstructured"
                href.uritemplate="/apm/editor.html{+id}"/>
            </createscript>
            <uploadscript
              jcr:primaryType="nt:unstructured"
              granite:id="scripts-upload"
              sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
              action="scripts.upload"
              icon="upload"
              text="Upload Script">
            </uploadscript>
            <createfolder
              granite:id="cq-experiencefragments-admin-createfolder"
              granite:rel="cq-siteadmin-admin-createfolder"
              jcr:primaryType="nt:unstructured"
              sling:resourceType="granite/ui/components/coral/foundation/collection/actionlink"
              action="foundation.dialog"
              href="/mnt/overlay/wcm/core/content/coral/common/createfolderdialog.html${requestPathInfo.suffix}"
              icon="folder"
              relScope="collection"
              target=".cq-experience-fragments-admin-childpages"
              text="Create Folder">
              <data
                jcr:primaryType="nt:unstructured"
                nesting="hide"
                src.uritemplate="/mnt/overlay/wcm/core/content/coral/common/createfolderdialog.html{+id}"/>
            </createfolder>
          </items>
        </create>
        <viewMode
          granite:class="granite-toggleable-control-view"
          jcr:primaryType="nt:unstructured"
          sling:resourceType="granite/ui/components/coral/foundation/cyclebutton"
          displayMode="icontext">
          <items jcr:primaryType="nt:unstructured">
            <viewList
              jcr:primaryType="nt:unstructured"
              sling:resourceType="granite/ui/components/coral/foundation/button"
              granite:id="list-view-switcher"
              action="foundation.link"
              icon="viewList"
              text="List View">
              <granite:data
                jcr:primaryType="nt:unstructured"
                hideView="graph-view-root"
                showView="list-view-root"/>
            </viewList>
            <graphView
              jcr:primaryType="nt:unstructured"
              sling:resourceType="granite/ui/components/coral/foundation/button"
              granite:id="graph-view-switcher"
              action="foundation.link"
              icon="workflow"
              text="Graph View">
              <granite:data
                jcr:primaryType="nt:unstructured"
                hideView="list-view-root"
                showView="graph-view-root"/>
            </graphView>
          </items>
        </viewMode>
      </secondary>
      <selection jcr:primaryType="nt:unstructured">
        <dryrun
          granite:class="foundation-collection-action"
          jcr:primaryType="nt:unstructured"
          sling:resourceType="granite/ui/components/coral/foundation/collection/action"
          action="scripts.dryrun"
          activeCondition="is-available"
          icon="playCircle"
          relScope="item"
          target=".cq-experience-fragments-admin-childpages"
          text="Dry Run"
          variant="actionBar"/>
        <runonauthor
          granite:class="foundation-collection-action"
          jcr:primaryType="nt:unstructured"
          sling:resourceType="granite/ui/components/coral/foundation/collection/action"
          action="scripts.runonauthor"
          activeCondition="is-available"
          icon="play"
          relScope="item"
          target=".cq-experience-fragments-admin-childpages"
          text="Run on Author"
          variant="actionBar"/>
        <runonpublish
          granite:class="foundation-collection-action"
          jcr:primaryType="nt:unstructured"
          sling:resourceType="granite/ui/components/coral/foundation/collection/action"
          action="scripts.runonpublish"
          activeCondition="is-available"
          icon="play"
          relScope="item"
          target=".cq-experience-fragments-admin-childpages"
          text="Run on Publish"
          variant="actionBar"/>
        <view
          granite:class="foundation-collection-action"
          jcr:primaryType="nt:unstructured"
          sling:resourceType="granite/ui/components/coral/foundation/collection/action"
          action="foundation.link"
          activeSelectionCount="single"
          activeCondition="is-not-folder"
          icon="viewOn"
          relScope="item"
          target=".cq-experience-fragments-admin-childpages"
          text="View"
          variant="actionBar">
          <data
            jcr:primaryType="nt:unstructured"
            href.uritemplate="/apm/viewer.html{+item}"/>
        </view>
        <edit
          granite:class="foundation-collection-action"
          jcr:primaryType="nt:unstructured"
          sling:resourceType="granite/ui/components/coral/foundation/collection/action"
          action="foundation.link"
          activeSelectionCount="single"
          activeCondition="is-not-folder"
          icon="edit"
          relScope="item"
          target=".cq-experience-fragments-admin-childpages"
          text="Edit"
          variant="actionBar">
          <data
            jcr:primaryType="nt:unstructured"
            href.uritemplate="/apm/editor.html{+item}"/>
        </edit>
        <move
          granite:class="foundation-collection-action"
          jcr:primaryType="nt:unstructured"
          sling:resourceType="granite/ui/components/coral/foundation/collection/action"
          action="foundation.link"
          activeSelectionCount="single"
          icon="move"
          pageheading="Move Item"
          target=".cq-experience-fragments-admin-childpages"
          text="Move"
          title="Move"
          variant="actionBar">
          <data
            jcr:primaryType="nt:unstructured"
            href.uritemplate="/apps/apm/views/move.html{+item}"/>
        </move>
        <deletepage
          granite:class="foundation-collection-action"
          granite:rel="cq-siteadmin-admin-actions-delete-activator"
          jcr:primaryType="nt:unstructured"
          sling:resourceType="granite/ui/components/coral/foundation/collection/action"
          action="cq.wcm.delete"
          icon="delete"
          relScope="collection"
          target=".cq-experience-fragments-admin-childpages"
          text="Delete"
          variant="actionBar"/>
      </selection>
    </actions>
  </jcr:content>
</jcr:root>